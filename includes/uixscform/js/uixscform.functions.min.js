(function($){"use strict";$(document).ready(function(){$(document).on('mouseenter','.uixscform-modal-save-btn-wrapper',function(e){e.preventDefault();$(this).find('.uixscform-modal-button-icon').addClass('active');return false;});$(document).on('mouseleave','.uixscform-modal-save-btn-wrapper',function(e){e.preventDefault();$(this).find('.uixscform-modal-button-icon').removeClass('active');return false;});$(document).on('click','.uixscform-modal-button-icon',function(e){e.preventDefault();var curmID=uixscform_curModalID(),curcode=$(this).data('code'),$mainmodalcontent=$('#'+curmID+' .ajax-temp'),$previewbox=$('#'+curmID+' .preview-box'),$previewboxBtn=$('#'+curmID+' .preview-box > .uixscform-sub-window-buttons');jQuery.ajax({url:ajaxurl,type:'POST',data:{action:'uixscform_ajax_shortcodepreview',previewcode:curcode},success:function(result){$previewbox.find(' > div').html(result);$previewboxBtn.css('visibility','visible');if(jQuery.isFunction(jQuery.uix_sc_init)){jQuery.uix_sc_init();}
return false;},beforeSend:function(){$previewboxBtn.css('visibility','hidden');$mainmodalcontent.css('visibility','hidden');$previewbox.addClass('active');$previewbox.find(' > div').html('<span class="uixscform-loading"></span>');}});});$(document).on('click','.uixscform-modal-exitpreview-btn',function(e){e.preventDefault();$('.uixscform-modal-box .preview-box').removeAttr('id').removeClass('active');$('.uixscform-modal-box .ajax-temp').css('visibility','visible');});$(document).on('mouseenter','.custom-button',function(e){e.preventDefault();var c=$(this).attr('class');if(c.indexOf('-widget_btn')>=0&&c.indexOf('mce-')<0){c=c.replace(/uix_sc_form_/g,'uix_sc_').replace(/uix_sc_/g,'uix_sc_module_').replace(/uix_sc_module_module_/g,'uix_sc_module_');}
if(c.indexOf('-widget_btn')>=0&&c.indexOf('mce-')<0){c=c.replace(/uix_sc_/g,'mce-uix_sc_');$(this).attr('class',c);}});$(document).on('click','.uixscform-icon-clear',function(e){e.preventDefault();var c=$(this).closest('.uixscform-box'),s=c.find('span.icon-selector'),targetID='#'+s.attr('data-targetid'),chooseBtnID='#'+s.attr('data-targetid')+'-choosebtn',labeltxtID='#'+s.attr('data-targetid')+'-label',previewID='#'+s.attr('data-previewid');$(this).css('display','none');c.find('input').val('');c.find('.uixscform-icon-selector-icon-preview').html('').removeClass('iconshow');$(chooseBtnID).show();$(labeltxtID).show();$(previewID).hide();});$(document).on('click','.uixscform_btn_trigger-normalchk',function(){var cur_targetID='#'+$(this).attr("data-targetid");if($(this).is(':checked')){$(cur_targetID).val(1);}else{$(cur_targetID).val(0);}
$(cur_targetID).focus().blur();});$(document).on('click','.uixscform-form-container',function(){$(this).find('form .wp-color-input').blur();});$(document).on('keyup','.uixscform-input-text-spy-attrslug',function(){var cur_value=$(this).val();var $attr_input=$(this).closest('.uixscform-box').find('.uixscform-input-text-attr');if($attr_input.length>0){$attr_input.val(uixscform_format_htmlAttr(cur_value));}
var $slug_input=$(this).closest('.uixscform-box').find('.uixscform-input-text-slug');if($slug_input.length>0){$slug_input.val(uixscform_format_slug(cur_value));}});$(document).on('keyup','.uixscform-input-text-spy-deg_px',function(){var cur_value=$(this).val();var $attr_input=$(this).closest('.uixscform-box').find('.uixscform-input-text-deg_px');if($attr_input.length>0){$attr_input.val(uixscform_format_degToPx(cur_value));}});$(document).on('change','.uixscform_btn_trigger-select',function(e){e.preventDefault();var $selector=$(this),cur_targetID='#'+$selector.attr("data-targetid");$(cur_targetID).val($selector.find(' option:selected').val());$selector.uixscform_selectEvent();$(cur_targetID).focus().blur();});$(document).on('click','.uixscform_btn_trigger-multradio span',function(e){e.preventDefault();var $selector=$(this).parent(),$option=$(this),cur_targetID='#'+$selector.attr("data-targetid"),cur_value=$option.attr('data-value'),tar_value=$(cur_targetID).val()+',',res_value='';$option.toggleClass('active');if(tar_value.indexOf(cur_value+',')<0){res_value=tar_value+cur_value+',';}else{res_value=tar_value.replace(cur_value+',','');}
res_value=res_value.replace(/,\s*$/,'').replace(/^,/,'');$(cur_targetID).val(res_value);$selector.uixscform_multipleEvent();$(cur_targetID).focus().blur();});$(document).on('click','.uixscform_btn_trigger-radio span',function(e){e.preventDefault();var $selector=$(this).parent(),$option=$(this),cur_targetID='#'+$selector.attr("data-targetid"),cur_value=$option.attr('data-value');var $colorname_input=$selector.closest('.uixscform-box').find('.uixscform-color-name');if($colorname_input.length>0){$colorname_input.val(uixscform_format_colorTran(cur_value));}
$selector.find('span').removeClass('active');$(cur_targetID).val(cur_value);$option.addClass('active');$selector.uixscform_radioEvent();$(cur_targetID).focus().blur();});$(document).on('click','.uixscform_btn_trigger-toggleshow',function(e){e.preventDefault();var $this=$(this),$target=$this.closest('.uixscform-box');$target.find('input[type="hidden"]').val(1);$this.uixscform_toggleEvent({unidirectionalDisplay:true});});$(document).on('click','.uixscform_btn_trigger-toggleswitch_checkbox',function(e){e.preventDefault();var $this=$(this),$target=$this.closest('.uixscform-box').find('input[type="hidden"]');if($target.val()==1){$target.val(0);}else{$target.val(1);}
$this.uixscform_toggleEvent({unidirectionalDisplay:false});$target.focus().blur();});$(document).on('click','.uixscform_btn_trigger-clone',function(e){e.preventDefault();$(this).uixscform_dynamicFormInit({type:'click'});});$(document).on('click','.uixscform_btn_trigger-upload',function(e){e.preventDefault();var cur_btnID='#'+$(this).attr("data-insert-btnid"),cur_closebtnID='#'+$(this).attr("data-insert-closebtnid"),cur_targetID='#'+$(this).attr("data-targetid"),cur_prop=$(this).attr("data-insert-prop");var upload_frame,value_id,propIDPrefix=cur_btnID.replace('#','');var _targetImgContainer=$(this).attr("data-insert-img");var _targetPreviewContainer=$(this).attr("data-insert-preview");value_id=$(this).attr('id');event.preventDefault();if(upload_frame){upload_frame.open();return;}
upload_frame=wp.media({title:uix_shortcodes_wp_plugin.lang_media_title,button:{text:uix_shortcodes_wp_plugin.lang_media_text,},multiple:false});upload_frame.on('select',function(){var attachment;attachment=upload_frame.state().get('selection').first().toJSON();$("#"+_targetImgContainer).val(attachment.url);$("#"+_targetPreviewContainer).find('img').attr("src",attachment.url);$("#"+_targetPreviewContainer).show();$("#"+_targetImgContainer).focus().blur();if(_targetPreviewContainer!=''&&_targetPreviewContainer!='none'){$(cur_btnID).parent('.uixscform-upbtn-container').css('height','150px');}
if(cur_closebtnID){$(cur_closebtnID).show().css({'display':'block'});}
if(cur_prop){$("."+propIDPrefix+'_repeat').show().addClass('active');$("."+propIDPrefix+'_position').show().addClass('active');$("."+propIDPrefix+'_attachment').show().addClass('active');$("."+propIDPrefix+'_size').show().addClass('active');}});upload_frame.open();if(cur_closebtnID){$(document).on('click',cur_closebtnID,function(e){e.preventDefault();var _targetImgContainer=$(this).attr("data-insert-img");var _targetPreviewContainer=$(this).attr("data-insert-preview");$("#"+_targetImgContainer).val('');$("#"+_targetPreviewContainer).find('img').attr("src",'');$("#"+_targetPreviewContainer).hide();$("#"+_targetImgContainer).focus().blur();if(_targetPreviewContainer!=''&&_targetPreviewContainer!='none'){$(cur_btnID).parent('.uixscform-upbtn-container').css('height','40px');}
$(this).hide();if(cur_prop){$("."+propIDPrefix+'_repeat').hide().removeClass('active');$("."+propIDPrefix+'_position').hide().removeClass('active');$("."+propIDPrefix+'_attachment').hide().removeClass('active');$("."+propIDPrefix+'_size').hide().removeClass('active');}});}});});})(jQuery);(function($){jQuery.fn.uixscform_mediaStatus=function(options){var settings=$.extend({},options);return this.each(function(){var cur_btnID='#'+$(this).attr("data-insert-btnid"),cur_closebtnID='#'+$(this).attr("data-insert-closebtnid"),cur_targetID='#'+$(this).attr("data-insert-img"),cur_previewID='#'+$(this).attr("data-insert-preview"),cur_prop=$(this).attr("data-insert-prop"),propIDPrefix=cur_btnID.replace('#',''),imgvalue=$(cur_targetID).val();if($(cur_targetID).length>0){if(imgvalue.length==0){$(cur_previewID).hide().find('img').attr('src','');}
if(imgvalue.length>0){$(cur_closebtnID).show().css({'display':'block'});$(cur_previewID).show().find('img').attr('src',imgvalue);if(cur_prop){$("."+propIDPrefix+'_repeat').show();$("."+propIDPrefix+'_position').show();$("."+propIDPrefix+'_attachment').show();$("."+propIDPrefix+'_size').show();}
if(cur_closebtnID){$(document).on('click',cur_closebtnID,function(e){e.preventDefault();var _targetImgContainer=$(this).attr("data-insert-img");var _targetPreviewContainer=$(this).attr("data-insert-preview");$("#"+_targetImgContainer).val('');$("#"+_targetPreviewContainer).find('img').attr('src','');$("#"+_targetPreviewContainer).hide();if(_targetPreviewContainer!=''&&_targetPreviewContainer!='none'){$(cur_btnID).parent('.uixscform-upbtn-container').css('height','40px');}
$(this).hide();if(cur_prop){$("."+propIDPrefix+'_repeat').hide();$("."+propIDPrefix+'_position').hide();$("."+propIDPrefix+'_attachment').hide();$("."+propIDPrefix+'_size').hide();}});}}}});};})(jQuery);(function($){jQuery.fn.uixscform_selectEvent=function(options){var settings=$.extend({},options);return this.each(function(){var $this=$(this),cur_targetID='#'+$this.attr('data-targetid'),cur_val=$(cur_targetID).val();if(cur_val==''){cur_val=$this.find('option:first').val();$(cur_targetID).val(cur_val);$(cur_targetID).focus().blur();}
if($this.attr('data-targetid')==''){cur_val=$this.closest('.uixscform-box').find('input[type="hidden"]').val();}
$this.val(cur_val);});};})(jQuery);(function($){jQuery.fn.uixscform_multipleEvent=function(options){var settings=$.extend({},options);return this.each(function(){var $this=$(this),$option=$this.find('span'),cur_targetID='#'+$this.attr('data-targetid');$option.each(function(){if($(cur_targetID).val().indexOf($(this).attr('data-value'))>=0){$(this).addClass('active');}else{$(this).removeClass('active');}});});};})(jQuery);(function($){jQuery.fn.uixscform_radioEvent=function(options){var settings=$.extend({},options);return this.each(function(){var $this=$(this),$option=$this.find('span'),cur_targetID='#'+$this.attr('data-targetid');if(cur_targetID.indexOf('_listitem')>=0){$this.attr("data-trigger-clone",1);}
var clone_list=$this.attr("data-trigger-clone"),clone_tr_class=$this.closest('tr').attr('class');$option.each(function(){if($(this).attr('data-value')==$(cur_targetID).val()){$(this).addClass('active');}else{$(this).removeClass('active');}
var option_targetID=$(this).attr('data-targetid'),option_targetIDs=uixscform_get_real_ids(option_targetID,cur_targetID,$this);if(option_targetIDs!=''&&option_targetIDs!=','){if($(this).attr('data-value')==$(cur_targetID).val()){if(clone_list==1){$(option_targetIDs).closest('.uixscform-box').show().addClass('active');$(option_targetIDs).addClass('active');if(typeof clone_tr_class!==typeof undefined&&clone_tr_class.indexOf('dynamic-row-')>=0){$(option_targetIDs).closest('tr').show().addClass('active');}}else{$(option_targetIDs).closest('tr').show().addClass('active');$(option_targetIDs).addClass('active');}}else{if(clone_list==1){$(option_targetIDs).closest('.uixscform-box').hide().removeClass('active');$(option_targetIDs).removeClass('active');if(typeof clone_tr_class!==typeof undefined&&clone_tr_class.indexOf('dynamic-row-')>=0){$(option_targetIDs).closest('tr').hide().removeClass('active');}}else{$(option_targetIDs).closest('tr').hide().removeClass('active');$(option_targetIDs).removeClass('active');}}}
if(typeof(option_targetIDs)=='string'&&option_targetIDs.length>0){option_targetIDs=option_targetIDs+',';var ids=option_targetIDs.split(',');for(var i=0;i<ids.length;i++){if(ids[i]=='')break;var $unidirectionalDisplayTrigger=$(ids[i]).closest('.uixscform-box').find('.uixscform_btn_trigger-toggleshow');if($unidirectionalDisplayTrigger.length>0){var _$this=$unidirectionalDisplayTrigger,_$target=_$this.closest('.uixscform-box'),_targetID=_$this.attr('data-targetid'),_curID=_$target.find('input[type="hidden"]').attr('id'),_curV=_$target.find('input[type="hidden"]').val(),_option_targetIDs=uixscform_get_real_ids(_targetID,_curID,_$this);if(_curID.indexOf('_listitem')>=0){_$this.attr("data-trigger-clone",1);}
var _clone_list=_$this.attr("data-trigger-clone"),_clone_tr_class=_$this.closest('tr').attr('class');if($(this).attr('data-value')==$(cur_targetID).val()){if(_curV==1){if(_clone_list==1){_$this.closest('.uixscform-box').hide();if(_option_targetIDs!=''){$(_option_targetIDs).closest('.uixscform-box').show().addClass('active');$(_option_targetIDs).addClass('active');if(typeof _clone_tr_class!==typeof undefined&&_clone_tr_class.indexOf('dynamic-row-')>=0){$(_option_targetIDs).closest('tr').show().addClass('active');}}}else{_$this.closest('tr').hide();if(_option_targetIDs!=''){$(_option_targetIDs).closest('tr').show().addClass('active');$(_option_targetIDs).addClass('active');}}}else{if(_clone_list==1){_$this.closest('.uixscform-box').show();if(_option_targetIDs!=''){$(_option_targetIDs).closest('.uixscform-box').hide().removeClass('active');$(_option_targetIDs).removeClass('active');if(typeof _clone_tr_class!==typeof undefined&&_clone_tr_class.indexOf('dynamic-row-')>=0){$(_option_targetIDs).closest('tr').hide().removeClass('active');}}}else{_$this.closest('tr').show();if(_option_targetIDs!=''){$(_option_targetIDs).closest('tr').hide().removeClass('active');$(_option_targetIDs).removeClass('active');}}}}else{if(_clone_list==1){_$this.closest('.uixscform-box').hide();if(_option_targetIDs!=''){$(_option_targetIDs).closest('.uixscform-box').hide().removeClass('active');$(_option_targetIDs).removeClass('active');if(typeof _clone_tr_class!==typeof undefined&&_clone_tr_class.indexOf('dynamic-row-')>=0){$(_option_targetIDs).closest('tr').hide().removeClass('active');}}}else{_$this.closest('tr').hide();if(_option_targetIDs!=''){$(_option_targetIDs).closest('tr').hide().removeClass('active');$(_option_targetIDs).removeClass('active');}}}}}}});$('.dynamic-append-wrapper').parent('td').parent('tr').show();});};})(jQuery);(function($){jQuery.fn.uixscform_toggleEvent=function(options){var settings=$.extend({'unidirectionalDisplay':true},options);return this.each(function(){var $this=$(this),$target=$this.closest('.uixscform-box'),targetID=$this.attr('data-targetid'),curID=$target.find('input[type="hidden"]').attr('id'),targetIDs=uixscform_get_real_ids(targetID,curID,$this);if(curID.indexOf('_listitem')>=0){$this.attr("data-trigger-clone",1);}
var clone_list=$this.attr("data-trigger-clone"),clone_tr_class=$this.closest('tr').attr('class');if($target.find('input[type="hidden"]').val()==1){if($this.hasClass('onoffswitch'))$this.addClass('checked');if(clone_list==1){if(settings.unidirectionalDisplay){$this.closest('.uixscform-box').hide();}
if(targetIDs!=''){$(targetIDs).closest('.uixscform-box').show().addClass('active');$(targetIDs).addClass('active');if(typeof clone_tr_class!==typeof undefined&&clone_tr_class.indexOf('dynamic-row-')>=0){$(targetIDs).closest('tr').show().addClass('active');}}}else{if(settings.unidirectionalDisplay){$this.closest('tr').hide();}
if(targetIDs!=''){$(targetIDs).closest('tr').show().addClass('active');$(targetIDs).addClass('active');}}}else{if($this.hasClass('onoffswitch'))$this.removeClass('checked');if(clone_list==1){if(settings.unidirectionalDisplay){$this.closest('.uixscform-box').show();}
if(targetIDs!=''){$(targetIDs).closest('.uixscform-box').hide().removeClass('active');$(targetIDs).removeClass('active');if(typeof clone_tr_class!==typeof undefined&&clone_tr_class.indexOf('dynamic-row-')>=0){$(targetIDs).closest('tr').hide().removeClass('active');}}}else{if(settings.unidirectionalDisplay){$this.closest('tr').show();}
if(targetIDs!=''){$(targetIDs).closest('tr').hide().removeClass('active');$(targetIDs).removeClass('active');}}}
if(typeof(targetIDs)=='string'&&targetIDs.length>0){targetIDs=targetIDs+',';var ids=targetIDs.split(',');for(var i=0;i<ids.length;i++){if(ids[i]=='')break;var $unidirectionalDisplayTrigger=$(ids[i]).closest('.uixscform-box').find('.uixscform_btn_trigger-toggleshow');if($unidirectionalDisplayTrigger.length>0){var _$this=$unidirectionalDisplayTrigger,_$target=_$this.closest('.uixscform-box'),_targetID=_$this.attr('data-targetid'),_curID=_$target.find('input[type="hidden"]').attr('id'),_curV=_$target.find('input[type="hidden"]').val(),_targetIDs=uixscform_get_real_ids(_targetID,_curID,_$this);if(_curID.indexOf('_listitem')>=0){_$this.attr("data-trigger-clone",1);}
var _clone_list=_$this.attr("data-trigger-clone"),_clone_tr_class=_$this.closest('tr').attr('class');if($target.find('input[type="hidden"]').val()==1){if(_curV==1){if(_clone_list==1){_$this.closest('.uixscform-box').hide();if(_targetIDs!=''){$(_targetIDs).closest('.uixscform-box').show().addClass('active');$(_targetIDs).addClass('active');if(typeof _clone_tr_class!==typeof undefined&&_clone_tr_class.indexOf('dynamic-row-')>=0){$(_targetIDs).closest('tr').show().addClass('active');}}}else{_$this.closest('tr').hide();if(_targetIDs!=''){$(_targetIDs).closest('tr').show().addClass('active');$(_targetIDs).addClass('active');}}}else{if(_clone_list==1){_$this.closest('.uixscform-box').show();if(_targetIDs!=''){$(_targetIDs).closest('.uixscform-box').hide().removeClass('active');$(_targetIDs).removeClass('active');if(typeof _clone_tr_class!==typeof undefined&&_clone_tr_class.indexOf('dynamic-row-')>=0){$(_targetIDs).closest('tr').hide().removeClass('active');}}}else{_$this.closest('tr').show();if(_targetIDs!=''){$(_targetIDs).closest('tr').hide().removeClass('active');$(_targetIDs).removeClass('active');}}}}else{if(_clone_list==1){_$this.closest('.uixscform-box').hide();if(_targetIDs!=''){$(_targetIDs).closest('.uixscform-box').hide().removeClass('active');$(_targetIDs).removeClass('active');if(typeof _clone_tr_class!==typeof undefined&&_clone_tr_class.indexOf('dynamic-row-')>=0){$(_targetIDs).closest('tr').hide().removeClass('active');}}}else{_$this.closest('tr').hide();if(_targetIDs!=''){$(_targetIDs).closest('tr').hide().removeClass('active');$(_targetIDs).removeClass('active');}}}}}}
$('.dynamic-append-wrapper').parent('td').parent('tr').show();});};})(jQuery);(function($){jQuery.fn.uixscform_dynamicFormInit=function(options){var settings=$.extend({'type':'',},options);return this.each(function(){var cur_appendID='#'+$(this).attr("data-clone-appendid"),cur_removeCloneClass=$(this).attr("data-clone-removeclass"),cur_colID=$(this).attr("data-clone-colid"),cur_formID=$(this).attr("data-clone-formid"),cur_max=$(this).attr("data-clone-max"),cur_sectionID=$(this).attr("data-clone-sectionid"),cur_renderTemp=uixscform_module_form_ids(cur_formID,cur_sectionID,cur_colID,false),cur_echo_tmpl_ID='#'+$(this).closest('.uixscform-modal-box').attr('id')+' .echo-module-temp-clone',cur_echo_tmpl_code='',cur_load_tmpl_ID='',$obj=$('#uixscform-modal-open-mce-'+cur_formID+'-widget_btn');var clone_multiTrigger_group_col2=$(this).closest('.uixscform-modal-box').find('.uixscform-table-col-2').length,clone_multiTrigger_group_col3=$(this).closest('.uixscform-modal-box').find('.uixscform-table-col-3').length,clone_multiTrigger_group_col4=$(this).closest('.uixscform-modal-box').find('.uixscform-table-col-4').length,clone_multiTrigger_group_cols=0,clone_multiTrigger_group_index=0;if(clone_multiTrigger_group_col2>1)clone_multiTrigger_group_cols=clone_multiTrigger_group_col2;if(clone_multiTrigger_group_col3>1)clone_multiTrigger_group_cols=clone_multiTrigger_group_col3;if(clone_multiTrigger_group_col4>1)clone_multiTrigger_group_cols=clone_multiTrigger_group_col4;if(cur_appendID.indexOf('_one_')>=0)clone_multiTrigger_group_index=1;if(cur_appendID.indexOf('_two_')>=0)clone_multiTrigger_group_index=2;if(cur_appendID.indexOf('_three_')>=0)clone_multiTrigger_group_index=3;if(cur_appendID.indexOf('_four_')>=0)clone_multiTrigger_group_index=4;if(clone_multiTrigger_group_cols>1){var cur_formID_index='-'+clone_multiTrigger_group_index;$(cur_echo_tmpl_ID).html('');if(uixscform_isJSON(cur_renderTemp)){$('#module_tmpl_clone_'+settings.type+'__'+cur_formID+cur_formID_index).tmpl(JSON.parse(cur_renderTemp)).appendTo(cur_echo_tmpl_ID);}
cur_echo_tmpl_code=$(cur_echo_tmpl_ID).html();}
if(clone_multiTrigger_group_cols==0){$(cur_echo_tmpl_ID).html('');if(uixscform_isJSON(cur_renderTemp)){$('#module_tmpl_clone_'+settings.type+'__'+cur_formID).tmpl(JSON.parse(cur_renderTemp)).appendTo(cur_echo_tmpl_ID);}
cur_echo_tmpl_code=$(cur_echo_tmpl_ID).html();}
var show_count=cur_max,widget_ID=cur_sectionID,appendTotal=$(cur_echo_tmpl_code).find('.delrow').length,clone_content=cur_echo_tmpl_code;if(appendTotal>1){$(this).attr('data-clone-index',appendTotal);}
var cur_index=parseFloat($(this).attr('data-clone-index'));if(cur_index<show_count){clone_content=clone_content.replace(/__removeCloneClass__/g,cur_removeCloneClass);if(settings.type=='click'){clone_content=clone_content.replace(/__index__/g,cur_index);}else if(settings.type=='load'){clone_content=clone_content.replace(/__index__/g,'');}
$(cur_appendID).after(clone_content);$(this).attr('data-clone-index',cur_index+1);}
if((cur_index+1)==show_count){$(this).addClass('disable');}
$(document).uixscform_init_controls({form:$obj.find('.dynamic-append-wrapper')});var srow=$(cur_appendID).closest('td').find('.dynamic-row'),srowcols_c=$(cur_appendID).closest('.uixscform-table-cols-wrapper'),srowsingle_c=$(cur_appendID).closest('.uixscform-table-wrapper'),sroworg=null,sroworg_trigger=null;srow.addClass('active');if(srowcols_c.length>0){sroworg=srowcols_c.find('tr[class^="dynamic-row-"]'),sroworg_trigger=srowcols_c.find('tr[class^="dynamic-row-"] td');}else{sroworg=srowsingle_c.find('tr[class^="dynamic-row-"]'),sroworg_trigger=srowsingle_c.find('tr[class^="dynamic-row-"] td');}
$(srow).on('mouseenter',function(){$(srow).removeClass('hover');$(srow).addClass('hoverall');$(sroworg).removeClass('hover');$(sroworg).addClass('hoverall');$(this).addClass('hover');$(this).removeClass('hoverall');return false;});$(srow).on('mouseleave',function(){$(srow).removeClass('hoverall');$(sroworg).removeClass('hoverall');$(srow).addClass('hover');$(sroworg).addClass('hover');return false;});$(sroworg_trigger).on('mouseenter',function(){$(srow).removeClass('hover');$(srow).addClass('hoverall');$(sroworg).addClass('hover');$(sroworg).removeClass('hoverall');return false;});$(sroworg_trigger).on('mouseleave',function(){$(srow).removeClass('hoverall');$(sroworg).removeClass('hoverall');$(srow).addClass('hover');$(sroworg).addClass('hover');return false;});if(cur_removeCloneClass){$(document).on('click','.'+cur_removeCloneClass,function(e){e.preventDefault();var cur_thisBTN=$(this).closest('table').find('.uixscform_btn_trigger-clone'),cur_index=parseFloat(cur_thisBTN.attr('data-clone-index'));if(cur_index>1){$(this).closest('.dynamic-addnow').remove();cur_thisBTN.attr('data-clone-index',cur_index-1);}
cur_thisBTN.removeClass('disable');});}});};})(jQuery);(function($){jQuery.fn.uixscform_normalCheckboxStatus=function(options){var settings=$.extend({},options);return this.each(function(){var $this=$(this),cur_targetID='#'+$this.attr("data-targetid");if($(cur_targetID).val()==1){$this.prop("checked",true);}else{$this.prop("checked",false);}});};})(jQuery);(function($){jQuery.fn.uixscform_iconSelector=function(options){return this.each(function(){var $this=$(this),containerID='#'+$this.attr('data-containerid'),targetID='#'+$this.attr('data-targetid'),chooseBtnID='#'+$this.attr('data-targetid')+'-choosebtn',labeltxtID='#'+$this.attr('data-targetid')+'-label',previewID='#'+$this.attr('data-previewid'),iconURL=$this.attr('data-listurl'),listContainerID='icon-list-'+$this.attr('data-targetid'),defaultIconName=$(targetID).val(),$formContainer=$(previewID).closest('.uixscform-box');if($formContainer.find('input').val()==''){$formContainer.find('.uixscform-icon-clear').css('display','none');$formContainer.find('input').val('');$formContainer.find('.uixscform-icon-selector-icon-preview').html('').removeClass('iconshow');$(chooseBtnID).show();$(labeltxtID).show();$(previewID).hide();}else{$formContainer.find('.uixscform-icon-clear').css('display','inline-block');$formContainer.find('.uixscform-icon-selector-icon-preview').html('<i class="fa fa-'+$formContainer.find('input').val()+'"></i>').show().addClass('iconshow');$(chooseBtnID).hide();$(labeltxtID).hide();}
$(document).on('click',chooseBtnID,function(e){e.preventDefault();var curmID=uixscform_curModalID(),$socialIcon=$('#'+curmID+' .iconslist-box .b:not(.social)'),$socialTitle=$('#'+curmID+' .iconslist-box .uixscform-icon-social-title')
$('#'+curmID+' .iconslist-box').attr('id',listContainerID).addClass('active');if($this.hasClass('icon-social')){$socialIcon.hide();$socialTitle.hide();}else{$socialIcon.show();$socialTitle.show();}});$(document).on('click','#'+listContainerID+' .b.fontawesome',function(e){e.preventDefault();var _v=$(this).find('.fa').attr('class');_v=_v.replace('fa fa-','');$(targetID).val(_v);$(previewID).html('<i class="fa fa-'+_v+'"></i>').show().addClass('iconshow');$formContainer.find('.uixscform-icon-clear').css('display','inline-block');$(chooseBtnID).hide();$(labeltxtID).hide();$('.uixscform-modal-box .iconslist-box').removeAttr('id').removeClass('active');$(targetID).focus().blur();});$(document).on('click','#'+listContainerID+' .b.flaticon',function(e){e.preventDefault();var _v=$(this).find('.flaticon').attr('class');_v=_v.replace('flaticon ','');$(targetID).val(_v);$(previewID).html('<i class="flaticon '+_v+'"></i>').show().addClass('iconshow');$formContainer.find('.uixscform-icon-clear').css('display','inline-block');$(chooseBtnID).hide();$(labeltxtID).hide();$('.uixscform-modal-box .iconslist-box').removeAttr('id').removeClass('active');$(targetID).focus().blur();});});};})(jQuery);(function($){jQuery.fn.uixscform_init_controls=function(options){var settings=$.extend({'form':'',},options);return this.each(function(){var $this=$(this),$obj=settings.form;$obj.find('.uixscform-mce-editor').each(function(){$(this).find('textarea.mce').val(uixscform_to_controlSaveData_ToHTML($(this).find('textarea.mce').val()));uixscform_editorInit($(this).find('textarea.mce').attr('id'));});$obj.find('[data-enter-value]').each(function(){if($.trim($(this).val())==''){$(this).val('');}
if($.trim($(this).val()).length>0){var cur_val=$(this).val(),pattern_val=/_tmplitem=".*?"/g,matchArr_val='';while((matchArr_val=pattern_val.exec(cur_val))){var _re=new RegExp('(\\s|)'+matchArr_val[0]+'(\\s|)','g');cur_val=cur_val.replace(_re,'');}
$(this).val(cur_val);}});$obj.find('.uixscform_btn_trigger-select').each(function(){$(this).uixscform_selectEvent();});$obj.find('.uixscform-icon-selector').uixscform_iconSelector();$obj.find('.wp-color-input').wpColorPicker();$obj.find('.uixscform_btn_trigger-toggleshow').each(function(){$(this).uixscform_toggleEvent({unidirectionalDisplay:true});});$obj.find('.uixscform_btn_trigger-toggleswitch_checkbox').each(function(){$(this).uixscform_toggleEvent({unidirectionalDisplay:false});});$obj.find('.uixscform_btn_trigger-multradio').each(function(){$(this).uixscform_multipleEvent();});$obj.find('.uixscform_btn_trigger-radio').each(function(){$(this).uixscform_radioEvent();});$obj.find('.uixscform_btn_trigger-normalchk').uixscform_normalCheckboxStatus();$obj.find('.uixscform_btn_trigger-upload').uixscform_mediaStatus();});};})(jQuery);function uixscform_get_real_ids(targetID,curID,obj){var result='';(function($){"use strict";$(function(){if(typeof targetID!==typeof undefined&&targetID!=''){targetID=targetID.replace(/,\s*$/,'');targetID=uixscform_filter_control_id(targetID);obj.closest('form').find('[id]').each(function(){var _fieldID=$(this).attr('id');if(typeof(_fieldID)=='string'&&_fieldID.length>0){var ids=targetID.split(',');for(var i=0;i<ids.length;i++){if(ids[i]!=''&&_fieldID.indexOf(ids[i])>=0&&curID.indexOf(_fieldID)<0){_fieldID=uixscform_to_cloneControl_targetID(curID,_fieldID);if(_fieldID!=''){result+='#'+_fieldID+',';}}}}});result=result.replace(/,\s*$/,'');}});})(jQuery);return result;}
function uixscform_format_floatval(str){if(typeof(str)=='string'&&str.length>0){return(!isNaN(parseFloat(str)))?parseFloat(str):0;}else{return str;}}
function uixscform_format_degToPx(str){if(typeof(str)=='string'||typeof(str)=='number'){return Math.abs((uixscform_format_floatval(str)*180/Math.PI)/2);}else{return str;}}
function uixscform_format_htmlAttr(str){if(typeof(str)=='string'&&str.length>0){str=str.toString().replace(/(\r)*\n/g,"{br}").replace(/\s/g,'{s}');return str.replace(/\[|\]|"|&|'|<|>|[\x00-\x20]|[\x7F-\xFF]|[\u0100-\u2700]/g,function($0){var c=$0.charCodeAt(0),r=["&#"];c=(c==0x20)?0xA0:c;r.push(c);r.push(";");return r.join("");}).replace(/\&\#34;/g,'&amp;#34;').replace(/\&\#39;/g,"&amp;#39;").replace(/\&\#91;/g,"&amp;#91;").replace(/\&\#93;/g,"&amp;#93;").replace(/\&\#60;/g,'&amp;#60;').replace(/\&\#62;/g,"&amp;#62;").replace(/\{s\}/g,'&amp;nbsp;').replace(/\{br\}/g,'&amp;#91;br&amp;#93;');}else{return str;}};function uixscform_format_sourcecodePre(str){if(typeof(str)=='string'&&str.length>0){str=str.toString().replace(/(\r)*\n/g,"{br}").replace(/\s/g,'{s}');return str.replace(/\[|\]|"|&|'|<|>|[\x00-\x20]|[\x7F-\xFF]|[\u0100-\u2700]/g,function($0){var c=$0.charCodeAt(0),r=["&#"];c=(c==0x20)?0xA0:c;r.push(c);r.push(";");return r.join("");}).replace(/\&\#34;/g,'&amp;#34;').replace(/\&\#39;/g,"&amp;#39;").replace(/\&\#91;/g,"&amp;#91;").replace(/\&\#93;/g,"&amp;#93;").replace(/\&\#60;/g,'&amp;#60;').replace(/\&\#62;/g,"&amp;#62;").replace(/\{s\}/g,'&amp;nbsp;').replace(/\{br\}/g,'&amp;#91;br&amp;#93;');}else{return str;}};function uixscform_format_urlEncode(str){var newstr='';if(typeof(str)=='string'&&str.length>0){var re=new RegExp('^\#');if(!re.test(str)){if(str.indexOf('http://')<0&&str.indexOf('https://')<0){newstr='http://'+encodeURI(str);}else{newstr=encodeURI(str);}}else{newstr=str;}}else{newstr=str;}
return newstr;};function uixscform_format_shortcodeUsableHtmlToAttr(str){if(typeof(str)=='string'&&str.length>0){return str.replace(/(\r)*\n/g,"<br>").replace(/'/g,'').replace(/"/g,'').replace(/<|>/g,function($0){var c=$0.charCodeAt(0),r=["&#"];c=(c==0x20)?0xA0:c;r.push(c);r.push(";");return r.join("");}).replace(/\&\#60;/g,'&amp;#60;').replace(/\&\#62;/g,"&amp;#62;").replace(/\&\#91;/g,"&amp;#91;").replace(/\&\#93;/g,"&amp;#93;");}else{return str;}}
function uixscform_format_colorTran(value){switch(value){case'#a2bf2f':return'green';break;case'#d59a3e':return'yellow';break;case'#DD514C':return'red';break;case'#FA9ADF':return'pink';break;case'#4BB1CF':return'blue';break;case'#0E90D2':return'darkblue';break;case'#5F9EA0':return'cadetblue';break;case'#473f3f':return'black';break;case'#bebebe':return'gray';break;case'#ffffff':return'white';break;default:}};function uixscform_format_html_listTran(str,type){var newstr='';if(str!=''){if(typeof str!==typeof undefined){str=str.toString().replace(/(\r)*\n/g,'<br>').replace(/\s/g,"&nbsp;");}
var re=/\<([^\>]+)\>/ig;if(re.test(str)){str=str.replace(re,function(m){return m.replace(/&nbsp;/ig,' ');});}
var re2=new RegExp("\<"+type+"\>",'g'),re3=new RegExp("\<\/"+type+"\>",'g');str=str.replace(re2,'['+type+']').replace(re3,'[/'+type+']');if(str.indexOf('<br>')>=0){var strarr=str.split('<br>');for(var i=0;i<strarr.length;i++){if(strarr[i].indexOf('['+type+']')>=0){newstr+=strarr[i];}else{newstr+='['+type+']'+strarr[i]+'[/'+type+']';}}}else{if(str.indexOf('['+type+']')>=0){newstr=str;}else{newstr='['+type+']'+str+'[/'+type+']';}}}
var re4=new RegExp("\\["+type+"\\]\\[\\/"+type+"\\]",'g');newstr=newstr.replace(re4,'');newstr=newstr.replace(/\[/g,'&#91;').replace(/\]/g,'&#93;');return newstr;};function uixscform_value_callback(str,type){var newstr='';if(typeof(str)=='string'&&str.length>0){switch(type){case'url':newstr=uixscform_format_urlEncode(str);break;case'attr':newstr=uixscform_format_htmlAttr(str);break;case'slug':newstr=uixscform_format_slug(str);break;case'html':newstr=uixscform_format_text_entering(str);break;case'number':newstr=uixscform_format_floatval(str);break;case'number-deg_px':newstr=uixscform_format_degToPx(str);break;case'html-shortcode':newstr=uixscform_format_shortcodeUsableHtmlToAttr(str);break;case'color-name':newstr=uixscform_format_colorTran(str);break;case'list':newstr=uixscform_format_html_listTran(str,'li');break;case'source-code':newstr=uixscform_format_sourcecodePre(str);break;default:newstr=uixscform_format_text_entering(str);}}else{newstr=str;}
return newstr;};function uixscform_rangeSlider(sliderid,outputid,cusunits){var x=document.getElementById(sliderid).value;document.getElementById(outputid).innerHTML=x+cusunits;};function uixscform_insertCodes(code,conid){(function($){"use strict";$(function(){if(conid=='content'){wp.media.editor.insert(code);}else{$('#'+conid).val($('#'+conid).val()+uixscform_insertToTextarea(code));$('#'+conid).focus().trigger('change');}});})(jQuery);};function uixscform_insertToTextarea(s){return(typeof s!="string")?s:s.replace(/<br\s*[\/]?>/gi,'\n');};function uixscform_insertToBlockTextarea(s){return(typeof s!="string")?s:s.replace(/<br\w*\/*>/g,"[br]").replace(/<s>/g,"[s]").replace(/<\/s>/g,"[\/s]").replace(/<strong>/g,"[strong]").replace(/<\/strong>/g,"[\/strong]").replace(/<b>/g,"[b]").replace(/<\/b>/g,"[\/b]").replace(/<em>/g,"[em]").replace(/<\/em>/g,"[\/em]").replace(/<i>/g,"[i]").replace(/<\/i>/g,"[\/i]").replace(/<u>/g,"[u]").replace(/<\/u>/g,"[\/u]").replace(/<del>/g,"[del]").replace(/<\/del>/g,"[\/del]").replace(/<blockquote>/g,"[blockquote]").replace(/<\/blockquote>/g,"[\/blockquote]").replace(/<p>/g,"[p]").replace(/<\/p>/g,"[\/p]").replace(/\[br\]\s*$/,"");};function uixscform_format_text_decode(str){var newstr='';if(typeof(str)=='string'&&str.length>0){newstr=str.replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/\&amp;\#60;/g,'&lt;').replace(/\&amp;\#62;/g,"&gt;");var re=/\<pre.*?\>([^\>]+)\<\/pre\>/ig;if(re.test(newstr)){newstr=newstr.replace(re,function(m){return m.replace(/\&amp;nbsp;/g,"&nbsp;").replace(/\&amp;\#/g,"&#").replace(/\&\#91;br\&\#93;/g,"<br>");});}}
return newstr;}
function uixscform_format_text_entering(str){if(typeof str!==typeof undefined){str=str.toString().replace(/\&\#91;/g,'[').replace(/\&\#93;/g,']').replace(/(\r)*\n/g,"<br>").replace(/\s/g,"&nbsp;");var re=/\<([^\>]+)\>/ig,re2=/\[([^\]]+)\]/ig;if(re.test(str)){str=str.replace(re,function(m){return m.replace(/&nbsp;/ig,' ');});}
if(re2.test(str)){str=str.replace(re2,function(m){return m.replace(/&nbsp;/ig,' ');});}
str=str.replace(/\"/g,'&quot;').replace(/\'/g,'&apos;').replace(/<br\w*\/*>/g,"[br]").replace(/<s>/g,"[s]").replace(/<\/s>/g,"[\/s]").replace(/<strong>/g,"[strong]").replace(/<\/strong>/g,"[\/strong]").replace(/<b>/g,"[b]").replace(/<\/b>/g,"[\/b]").replace(/<em>/g,"[em]").replace(/<\/em>/g,"[\/em]").replace(/<i>/g,"[i]").replace(/<\/i>/g,"[\/i]").replace(/<u>/g,"[u]").replace(/<\/u>/g,"[\/u]").replace(/<del>/g,"[del]").replace(/<\/del>/g,"[\/del]").replace(/<blockquote>/g,"[blockquote]").replace(/<\/blockquote>/g,"[\/blockquote]").replace(/<p>/g,"[p]").replace(/<\/p>/g,"[\/p]");str=str.replace(/\[/g,'&#91;').replace(/\]/g,'&#93;');}
return str;}
function uixscform_per_module_has_shortcode(str){var hasShortcode=false;if(typeof str!==typeof undefined){var re=/\[([^\]]+)\]/ig;if(re.test(str)){hasShortcode=true;}}
return hasShortcode;}
function uixscform_curModalID(){var result='';(function($){"use strict";$(function(){$('.uixscform-modal-box').each(function(){if($(this).css('display')!='none'){result=$(this).attr('id')
return false;}});});})(jQuery);return result;};function uixscform_format_slug(str){if(typeof(str)=='string'&&str.length>0){return str.toString().replace(/[^\w\s\-！￥【】\u4e00-\u9eff]/gi,'').replace(/\s/g,'-').replace(/(\-){2,}/g,'-').replace(/\-\s*$/,'').toLowerCase();}else{return'';}}
function uixscform_isJSON(str){if(typeof(str)=='string'&&str.length>0){if(str.replace(/\"\"/g,'').replace(/\,/g,'')=='[{}]'){return false;}else{if(/^[\],:{}\s]*$/.test(str.replace(/\\["\\\/bfnrtu]/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){return true;}else{return false;}}}else{return false;}}
(function($){"use strict";$(function(){if(typeof(tinymce)!=='undefined'){tinymce.PluginManager.add('customCode',function(editor){function showDialog(){var win=editor.windowManager.open({title:"Source code",body:{type:'textbox',name:'customCode',multiline:true,minWidth:editor.getParam("code_dialog_width",600),minHeight:editor.getParam("code_dialog_height",Math.min(tinymce.DOM.getViewPort().h-200,500)),spellcheck:false,style:'direction: ltr; text-align: left'},onSubmit:function(e){editor.focus();if(editor.readonly!=true){editor.undoManager.transact(function(){editor.setContent(e.data.customCode);});}
editor.selection.setCursorLocation();editor.nodeChanged();}});win.find('#customCode').value(editor.getContent({source_view:true}));if(editor.readonly){var id=win.find('#customCode')[0]._id;$(win.find('#customCode')[0]._elmCache[id]).prop('readonly',true);}}
editor.addCommand("mceCustomCodeEditor",showDialog);editor.addButton('customCode',{icon:'code',tooltip:'Source code',onclick:showDialog,classes:'customCode'});editor.addMenuItem('customCode',{icon:'code',text:'Source code',context:'tools',onclick:showDialog});});}});})(jQuery);function uixscform_editorInit(id){(function($){"use strict";$(function(){if(typeof id!==typeof undefined){var vid=id.toString().replace('-editor',''),$sync=$('textarea#'+vid),editorH=$sync.data('editor-height');tinyMCE.execCommand('mceRemoveEditor',true,id);tinymce.init({relative_urls:false,content_css:'',convert_urls:false,media_live_embeds:true,selector:'textarea#'+id,height:editorH,menubar:false,plugins:'textcolor image media hr customCode colorpicker',toolbar:'undo redo removeformat  | forecolor backcolor styleselect | uixsc_link uixsc_unlink bold italic | bullist numlist outdent indent alignleft aligncenter alignright | hr uixsc_image media customCode',setup:function(ed){$sync.addClass('mce-sync');ed.on('change',function(e){var newvalue=ed.getContent().replace(/\r?\n/gm,'').replace(/\.\.\/wp-content\/uploads\//g,uix_shortcodes_wp_plugin.upload_dir_url);$sync.val(newvalue).trigger('change');});function uixsc_mce_insertImage(){var upload_frame;if(upload_frame){upload_frame.open();return;}
upload_frame=wp.media({title:uix_shortcodes_wp_plugin.lang_media_title,button:{text:uix_shortcodes_wp_plugin.lang_media_text,},multiple:false});upload_frame.on('select',function(){var attachment;attachment=upload_frame.state().get('selection').first().toJSON();ed.insertContent('<img src="'+attachment.url+'" alt="">');});upload_frame.open();}
ed.addButton('uixsc_image',{icon:'mce-ico mce-i-image',tooltip:uix_shortcodes_wp_plugin.lang_mce_image,onclick:uixsc_mce_insertImage});ed.addButton('uixsc_link',{icon:'mce-ico mce-i-link',tooltip:uix_shortcodes_wp_plugin.lang_mce_link_title,onclick:function(e){var urlRegex=/<a href="(.*?)"/g,urlMatch='',selectedtxt=ed.selection.getContent(),curlabel=selectedtxt.replace(/<a\b[^>]*>/i,'').replace(/<\/a>/i,''),curlinkURL='';while(urlMatch=urlRegex.exec(selectedtxt)){curlinkURL=urlMatch[1];}
ed.windowManager.open({title:uix_shortcodes_wp_plugin.lang_mce_link_title,body:[{type:'textbox',label:uix_shortcodes_wp_plugin.lang_mce_link_field_url,name:'link_url',value:curlinkURL,placeholder:'https://',multiline:true,minWidth:500,minHeight:30,},{type:'textbox',label:uix_shortcodes_wp_plugin.lang_mce_link_field_text,name:'link_text',value:curlabel,multiline:true,minWidth:500,minHeight:30,},{type:'checkbox',name:'link_target',label:' ',text:' '+uix_shortcodes_wp_plugin.lang_mce_link_field_win,},],onsubmit:function(e){var curtxt=(e.data.link_text!='')?e.data.link_text:e.data.link_url,target=(e.data.link_target)?'target="_blank"':'';ed.insertContent('<a href="'+e.data.link_url+'" '+target+'>'+curtxt+'</a>');}});}});ed.addButton('uixsc_unlink',{icon:'mce-ico mce-i-unlink',tooltip:uix_shortcodes_wp_plugin.lang_mce_unlink_title,onclick:function(e){var selectedtxt=ed.selection.getContent();selectedtxt=selectedtxt.replace(/<a\b[^>]*>/i,'').replace(/<\/a>/i,'');ed.insertContent(selectedtxt);}});},content_css:[uix_shortcodes_wp_plugin.url+'css/uixscform.editor.css']});}});})(jQuery);}
function uixscform_catlist(str,classprefix){var result='';if(typeof(str)=='string'&&str.length>0){var re=new RegExp("(.*?)\<\/div\>","gim"),v='<div class="'+classprefix+'type">',re=new RegExp(""+v+"(.*?)\<\/div\>","gim"),arr=[];str.replace(re,function(s,match){match=match.replace(/\&lt;/g,'').replace(/\&gt;/g,'').replace(/\&amp;/g,'');arr.push(match);});var uniqueArr=[];uniqueArr=arr.filter(function(item,pos,self){return self.indexOf(item)==pos;});var newArr=uniqueArr;for(var j=0;j<newArr.length;j++){result+='<li><a href="javascript:" data-group="'+uixscform_format_slug(newArr[j])+'">'+newArr[j]+'</a></li>';}}
return result;}
function uixscform_to_cloneControl_targetID(curControlID,targetObjID,indexNum){var newTargetID='';if(typeof(curControlID)=='string'&&curControlID.length>0){var realID=curControlID,newID='',oldIndex='',reIndex=realID.match(/-null(-|-\d+)(?=[^(-|-\d+)]*$)/);if(reIndex){oldIndex=reIndex[0];if(typeof indexNum!==typeof undefined&&indexNum!=''&&Number.isInteger(indexNum)){oldIndex=indexNum;}
var oldTargetID=targetObjID,re=/-null(-|-\d+)(?=[^(-|-\d+)]*$)/,reTargetIndex=oldTargetID.match(re);if(reTargetIndex){newTargetID=oldTargetID.replace(re,oldIndex);}}}
return newTargetID;}
function uixscform_to_cloneControlKey_ToSave(str){if(typeof(str)=='string'&&str.length>0){return str.replace(/\d+__fieldID(?=[^\d+__fieldID]*$)/,'__fieldID').replace(/\d+__fieldVal(?=[^\d+__fieldVal]*$)/,'__fieldVal');}else{return str;}}
function uixscform_to_cloneControlKey_notLoopIndex(str){if(typeof(str)=='string'&&str.length>0){if(!/\d+__fieldID(?=[^\d+__fieldID]*$)/.test(str)&&!/\d+__fieldVal(?=[^\d+__fieldVal]*$)/.test(str)){return true;}else{return false;}}}
function uixscform_to_cloneControlValueID_ToVar(str,sectionID){var newstr='';if(typeof(str)=='string'&&str.length>0){var re=new RegExp("-"+sectionID+"-\\d+",'g');newstr=str.replace(re,'-'+sectionID+'-');}
return newstr;}
function uixscform_format_textarea(obj,val){var newstr='';if(typeof obj!==typeof undefined){var value=(typeof val!==typeof undefined&&val!='')?val:obj.val();if(value!=''){if(!obj.hasClass('mce-sync')){newstr=uixscform_to_controlSaveData_ToHTML(value);}}}
return newstr;}
function uixscform_to_controlSaveData_ToHTML(str){var newstr='';if(typeof(str)=='string'&&str.length>0){newstr=uixscform_format_text_decode(str);}
return newstr;}
function uixscform_arr_to_tempjson(arr,json,renderFrontend){var jsondata='',jsondata_arr=[],old_cloneKey='',new_cloneKey='',old_clone_con='',new_clone_con='';if(typeof arr!==typeof undefined){jsondata=JSON.stringify(arr).replace(/^\[?|\]?$/g,'');var pattern_con=/:".*?"/g;if(pattern_con.test(jsondata)){jsondata=jsondata.replace(pattern_con,function(m){return m.replace(/,/g,'#comma#');});}
var pattern_con2=/:\[(.*?)\]/g;if(pattern_con2.test(jsondata)){jsondata=jsondata.replace(pattern_con2,function(m){return m.replace(/},{/g,'#boundary#');});}
if(typeof renderFrontend!==typeof undefined&&renderFrontend){jsondata=jsondata.replace(/_triggerclonelist__fieldID/g,'_triggerclonelist').replace(/__fieldVal/g,'');}
jsondata=jsondata.replace(/},{/g,',').replace(/\#boundary\#/g,'},{').replace(/^\{?|\}?$/g,'');if(typeof json!==typeof undefined&&json){var _jsondata=jsondata.split(',');for(var i=0;i<_jsondata.length;i++){jsondata_arr.push(_jsondata[i].replace(/\#comma\#/g,','));}
jsondata=jsondata_arr;}else{jsondata='[{'+jsondata+'}]';jsondata=jsondata.replace(/\#comma\#/g,',');}}
return jsondata;}
function uixscform_to_controlID_ToVar(str,tempID,sectionID,colID){var newstr='';if(typeof(str)=='string'&&str.length>0){var field_name=str.replace('__fieldID','').replace('__fieldVal','');newstr=tempID+'-'+colID+'-'+field_name+'-'+sectionID+'-';newstr=newstr.replace('---','----').replace(/\[/g,'').replace(/\]/g,'')}
return newstr;}
function uixscform_clonedata_exists(str){var obj='';if(uixscform_isJSON(str)){obj=JSON.stringify(str);}
if(typeof(str)=='string'&&str.length>0){obj=str;}
if(obj.indexOf('_triggerclonelist')>=0){return true;}else{return false;}}
function uixscform_to_controlSaveID_ToName(str,tempID,sectionID,colID){var newstr='';if(typeof(str)=='string'&&str.length>0){newstr=str.replace(tempID+'|','').replace('['+sectionID+']','').replace('['+colID+']','').replace('[','').replace(']','');}
return newstr;}
function uixscform_to_controlVarID_ToName(str){var newstr='';if(typeof(str)=='string'&&str.length>0){var reName=str.match(/.*-null-(.*)-null-.*/);if(reName){newstr=reName[1];}}
return newstr;}
function uixscform_to_controlName_ToVar(str,tempID,sectionID,colID){var newstr='';if(typeof(str)=='string'&&str.length>0){var _colID=colID.replace('---','----');newstr=tempID+'-'+_colID+'-'+str+'-'+sectionID+'-';}
return newstr;}
function uixscform_to_controlSaveID_ToVar(str,sectionID){var newstr='';if(typeof(str)=='string'&&str.length>0){var re=new RegExp(sectionID,'g');newstr=str.replace(re,'|'+sectionID+'|').replace(/\|/g,'-').replace(/\[/g,'').replace(/\]/g,'');}
return newstr;}
function uixscform_to_controlName_fieldSaveID(str,tempID,sectionID,colID){var newstr='';if(typeof(str)=='string'&&str.length>0){newstr=tempID+'|['+colID+']['+str+']['+sectionID+']';}
return newstr;}
function uixscform_to_controlID_ToSave(str,tempID,sectionID,colID){if(typeof(str)=='string'&&str.length>0){return str.replace(tempID+'-'+_colID+'-',tempID+'|['+colID+'][').replace('-'+sectionID+'-',']['+sectionID+']');}else{return str;}}
function uixscform_filter_control_id(str,reverse){var newstr=str;if(typeof(str)=='string'&&str.length>0){if(str.indexOf('_listitem')>=0){newstr=newstr.replace(/0/g,'Ⅰ').replace(/1/g,'Ⅱ').replace(/2/g,'Ⅲ').replace(/3/g,'Ⅳ').replace(/4/g,'Ⅴ').replace(/5/g,'Ⅵ').replace(/6/g,'Ⅶ').replace(/7/g,'Ⅷ').replace(/8/g,'Ⅸ').replace(/9/g,'Ⅹ');if(typeof reverse!==typeof undefined&&reverse){newstr=newstr.replace(/Ⅰ/g,'0').replace(/Ⅱ/g,'1').replace(/Ⅲ/g,'2').replace(/Ⅳ/g,'3').replace(/Ⅴ/g,'4').replace(/Ⅵ/g,'5').replace(/Ⅶ/g,'6').replace(/Ⅷ/g,'7').replace(/Ⅸ/g,'8').replace(/Ⅹ/g,'9');}}}
return newstr;}
function uixscform_module_form_JsonResult_frontend(str){var newstr=str;if(typeof(str)=='string'&&str.length>0){var pattern_id=/".*?"\:/g;if(pattern_id.test(newstr)){newstr=newstr.replace(pattern_id,function(m){return uixscform_filter_control_id(m,true);});}}
return newstr;}
function uixscform_filter_control_val(str){var newstr=str;if(typeof(str)=='string'&&str.length>0){newstr=newstr.replace(/\$/g,'&#36;').replace(/\[/g,'&#91;').replace(/\]/g,'&#93;');}
return newstr;}
function uixscform_module_form_keys(str){var result=[];if(typeof(str)=='string'&&str.length>0){var re=new RegExp("\\${(.*?)}","gim"),arr=[],result=[];str.replace(re,function(s,match){arr.push(match);});var uniqueArr=[];uniqueArr=arr.filter(function(item,pos,self){return self.indexOf(item)==pos;});var newArr=uniqueArr;for(var j=0;j<newArr.length;j++){result.push(uixscform_filter_control_id(newArr[j]));}}
return result;}
function uixscform_cloned_groupIndexTotal(beforeArr,groupTotal,beforeGroupTotal){var result=0;if(Object.prototype.toString.call(beforeArr)==='[object Array]'){for(var i=0;i<beforeArr.length;i++){if((i+1)%beforeGroupTotal==0&&(i+1)<groupTotal){result++;}}}
return result;}
function uixscform_cloned_groupStr(sectionID,newControlsArr,beforeArr,groupTotal,beforeGroupTotal,newControlsTotal){var result='',cloneTempListGroupRe=new RegExp("-"+sectionID+"-\\d+",'g');if(Object.prototype.toString.call(beforeArr)==='[object Array]'){beforeArr=uixscform_arr_to_tempjson(beforeArr,true,false);var groupIndexTotal=uixscform_cloned_groupIndexTotal(beforeArr,groupTotal,beforeGroupTotal);for(var i=0;i<beforeArr.length;i++){var v='',vArr=[];v=beforeArr[i].replace(cloneTempListGroupRe,'-'+sectionID+'-'+groupIndexTotal);vArr=v.split(':');v=v.replace(vArr[0],uixscform_filter_control_id(vArr[0],true));if((i+1)%beforeGroupTotal==0&&(i+1)<groupTotal){for(var g=0;g<newControlsTotal;g++){var newcontrol_o=newControlsArr[g],newcontrol=null,newcontrol_id='',newcontrol_val='';if(typeof newcontrol_o!==typeof undefined&&newcontrol_o!=''){newcontrol=JSON.stringify(newcontrol_o).replace(/^\{?|\}?$/g,'').split(','),newcontrol_id=newcontrol[1].replace(/-null(-|-\d+)(?=[^(-|-\d+)]*$)/g,'-'+sectionID+'-'+groupIndexTotal);newcontrol_val=newcontrol[0];if(newcontrol_val!=''&&newcontrol_id!=''){result+=newcontrol_val+',';result+=newcontrol_id+',';}}}
result+=v+'},{';groupIndexTotal--;}else{result+=v+',';}}
result=result.replace(/,\s*$/,'');result=JSON.parse('[{'+result+'}]');result.pop();}
return result;}
function uixscform_cloned_groupStr_frontend(beforeArr,groupTotal,beforeGroupTotal){var result='';if(Object.prototype.toString.call(beforeArr)==='[object Array]'){beforeArr=uixscform_arr_to_tempjson(beforeArr,true,false);for(var i=0;i<beforeArr.length;i++){var per_data=beforeArr[i];if((i+1)%beforeGroupTotal==0&&(i+1)<groupTotal){result+=per_data+'},{'}else{result+=per_data+',';}}
result=result.replace(/,\s*$/,'');result=JSON.parse('[{'+result+'}]');}
return result;}
function uixscform_module_form_ids(tempID,sectionID,colID,returnTempID){var result=[];if(typeof tempID!==typeof undefined){(function($){"use strict";$(function(){result.push({colID:colID});result.push({sectionID:sectionID});result.push({formID:tempID});var
keys=uixscform_module_form_keys($('#module_tmpl__'+tempID).html()),cloneTempListKey=[],cloneBeforeTempListIndex=[],cloneBeforeTempListElements=[],cloneTempListElements=[],cloneTempListElementsNew=[],cloneTempListMax=$($('#module_tmpl__'+tempID).html()).find('[data-clone-max]').attr('data-clone-max'),renderTempID='',renderTempElement1='',renderTempElement2='',all_field_ids=$('#uixscform-form-all-field-ids-'+tempID).attr('data-field-ids'),all_clonefield_ids='';if(typeof all_field_ids!==typeof undefined){var new_all_field_ids_arr=all_field_ids.split(',');for(var i=0;i<new_all_field_ids_arr.length;i++){if(new_all_field_ids_arr[i]!=''&&new_all_field_ids_arr[i].indexOf('_triggerclonelist')<0){var _new_field_name=new_all_field_ids_arr[i],_new_key_id=uixscform_filter_control_id(_new_field_name)+'__fieldID';all_clonefield_ids+=_new_key_id+',';}}}
if(Object.prototype.toString.call(keys)==='[object Array]'){for(var i=0;i<keys.length;i++){var _key_id_vid=keys[i],_field_name='',_field_full_id='',_field_value='';if(_key_id_vid.indexOf('__index__')<0&&_key_id_vid.indexOf('_triggerclonelist')<0){if(_key_id_vid.indexOf('__fieldID')>=0&&_key_id_vid.indexOf('_temp')<0){_field_full_id=uixscform_to_controlID_ToVar(_key_id_vid,tempID,sectionID,colID);result.push({[_key_id_vid]:_field_full_id});}
if(_key_id_vid.indexOf('__fieldVal')>=0&&_key_id_vid.indexOf('_temp')<0){result.push({[_key_id_vid]:""});}
if(_key_id_vid.indexOf('__fieldID')>=0&&_key_id_vid.indexOf('_temp')>=0){_field_full_id=uixscform_to_controlID_ToVar(_key_id_vid,tempID,sectionID,colID);renderTempElement1={[_key_id_vid]:_field_full_id};renderTempID=_field_full_id;}
if(_key_id_vid.indexOf('__fieldVal')>=0&&_key_id_vid.indexOf('_temp')>=0){renderTempElement2={[_key_id_vid]:""};}}}}
if(typeof cloneTempListMax!==typeof undefined&&cloneTempListMax>0){if(Object.prototype.toString.call(keys)==='[object Array]'){for(var i=0;i<keys.length;i++){if(keys[i].indexOf('_triggerclonelist')>=0){cloneTempListKey.push(keys[i]);}}}
var cloneBeforeTempListTotal=0,cloneTempListTotal=0,cloneTempListJsonArr=[],cloneTempListJson='',cloneTempListGroupIndex=0,cloneTempListNewControlArr=[],cloneTempListNewControlTotal=cloneTempListElementsNew.length;if(cloneTempListElementsNew.length>0){cloneTempListNewControlArr=cloneTempListElementsNew;}
var cloneBeforeTempListTotal_one_col=0,cloneBeforeTempListTotal_two_col=0,cloneBeforeTempListTotal_three_col=0,cloneBeforeTempListTotal_four_col=0,cloneTempListTotal_one_col=0,cloneTempListTotal_two_col=0,cloneTempListTotal_three_col=0,cloneTempListTotal_four_col=0,cloneTempListGroupIndex_one_col=0,cloneTempListGroupIndex_two_col=0,cloneTempListGroupIndex_three_col=0,cloneTempListGroupIndex_four_col=0,cloneTempListJson_one='',cloneTempListJson_two='',cloneTempListJson_three='',cloneTempListJson_four='',cloneTempListJsonArr_one=[],cloneTempListJsonArr_two=[],cloneTempListJsonArr_three=[],cloneTempListJsonArr_four=[];for(var k=0;k<cloneBeforeTempListElements.length;k++){var _v=JSON.stringify(cloneBeforeTempListElements[k]);if(_v.indexOf('_one_')>=0)cloneBeforeTempListTotal_one_col++;if(_v.indexOf('_two_')>=0)cloneBeforeTempListTotal_two_col++;if(_v.indexOf('_three_')>=0)cloneBeforeTempListTotal_three_col++;if(_v.indexOf('_four_')>=0)cloneBeforeTempListTotal_four_col++;if(_v.indexOf('_one_')<0&&_v.indexOf('_two_')<0&&_v.indexOf('_three_')<0&&_v.indexOf('_four_')<0){cloneBeforeTempListTotal++;}}
for(var k=0;k<cloneTempListElements.length;k++){var _el=cloneTempListElements[k],_v=JSON.stringify(_el);if(_v.indexOf('_one_')>=0)cloneTempListTotal_one_col++,cloneTempListJsonArr_one.push(_el);if(_v.indexOf('_two_')>=0)cloneTempListTotal_two_col++,cloneTempListJsonArr_two.push(_el);if(_v.indexOf('_three_')>=0)cloneTempListTotal_three_col++,cloneTempListJsonArr_three.push(_el);if(_v.indexOf('_four_')>=0)cloneTempListTotal_four_col++,cloneTempListJsonArr_four.push(_el);if(_v.indexOf('_one_')<0&&_v.indexOf('_two_')<0&&_v.indexOf('_three_')<0&&_v.indexOf('_four_')<0){cloneTempListTotal++;cloneTempListJsonArr.push(_el);}}
cloneBeforeTempListTotal=cloneBeforeTempListTotal*2;cloneBeforeTempListTotal_one_col=cloneBeforeTempListTotal_one_col*2;cloneBeforeTempListTotal_two_col=cloneBeforeTempListTotal_two_col*2;cloneBeforeTempListTotal_three_col=cloneBeforeTempListTotal_three_col*2;cloneBeforeTempListTotal_four_col=cloneBeforeTempListTotal_four_col*2;cloneTempListTotal=cloneTempListTotal*2;cloneTempListTotal_one_col=cloneTempListTotal_one_col*2;cloneTempListTotal_two_col=cloneTempListTotal_two_col*2;cloneTempListTotal_three_col=cloneTempListTotal_three_col*2;cloneTempListTotal_four_col=cloneTempListTotal_four_col*2;cloneTempListJson=uixscform_cloned_groupStr(sectionID,cloneTempListNewControlArr,cloneTempListJsonArr,cloneTempListTotal,cloneBeforeTempListTotal,cloneTempListNewControlTotal);cloneTempListJson_one=uixscform_cloned_groupStr(sectionID,cloneTempListNewControlArr,cloneTempListJsonArr_one,cloneTempListTotal_one_col,cloneBeforeTempListTotal_one_col,cloneTempListNewControlTotal);cloneTempListJson_two=uixscform_cloned_groupStr(sectionID,cloneTempListNewControlArr,cloneTempListJsonArr_two,cloneTempListTotal_two_col,cloneBeforeTempListTotal_two_col,cloneTempListNewControlTotal);cloneTempListJson_three=uixscform_cloned_groupStr(sectionID,cloneTempListNewControlArr,cloneTempListJsonArr_three,cloneTempListTotal_three_col,cloneBeforeTempListTotal_three_col,cloneTempListNewControlTotal);cloneTempListJson_four=uixscform_cloned_groupStr(sectionID,cloneTempListNewControlArr,cloneTempListJsonArr_four,cloneTempListTotal_four_col,cloneBeforeTempListTotal_four_col,cloneTempListNewControlTotal);if(cloneTempListKey.length>0){for(var p=0;p<cloneTempListKey.length;p++){var _key=cloneTempListKey[p];if(JSON.stringify(result).indexOf(_key)<0){if(_key.indexOf('_one_')>=0&&cloneTempListJson_one.length>0)result.push({[_key]:cloneTempListJson_one});if(_key.indexOf('_two_')>=0&&cloneTempListJson_two.length>0)result.push({[_key]:cloneTempListJson_two});if(_key.indexOf('_three_')>=0&&cloneTempListJson_three.length>0)result.push({[_key]:cloneTempListJson_three});if(_key.indexOf('_four_')>=0&&cloneTempListJson_four.length>0)result.push({[_key]:cloneTempListJson_four});if(_key.indexOf('_one_')<0&&_key.indexOf('_two_')<0&&_key.indexOf('_three_')<0&&_key.indexOf('_four_')<0&&cloneTempListJson.length>0){result.push({[_key]:cloneTempListJson});}}}}}
if(renderTempElement1!='')result.push(renderTempElement1);if(renderTempElement2!='')result.push(renderTempElement2);result=uixscform_arr_to_tempjson(result,false,false);var _result=result.replace(/^\{?|\}?$/g,''),_result_arr=_result.split(',');for(var i=0;i<_result_arr.length;i++){var _re_key_id_arr=_result_arr[i].split(':'),_re_old_key_id=_re_key_id_arr[0].replace(/"/g,''),_re_new_key_id=uixscform_filter_control_id(_re_old_key_id,true);if(_re_old_key_id.indexOf('_listitem')>=0){result=result.replace(_re_old_key_id,_re_new_key_id);}}
if(returnTempID){result=renderTempID.replace(/\[/g,'').replace(/\]/g,'');}});})(jQuery);}
return result;}